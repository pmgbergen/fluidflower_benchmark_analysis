{
    "description": "FluidFlower Benchmark config file for BC02",

    "physical_asset": {
        "dimensions": {
            "width": 0.92,
            "height": 0.55,
            "depth": 0.01,
            "expansion": 0.002
        },

        "parameters": {"porosity": 0.44}
    },
    
    "injection_start": "220523 150331",

    "drift": {"roi": [[600, 6750], [50, 7575]]},

    "color": {
        "reference": "custom",
        "custom_colorchecker_path": "./color_checker_BC02.npy",
        "custom_colorchecker_update": true,
        "custom_colorchecker_reference_image": "/home/jakub/images/ift/medium/BC02/220523_time145832_DSC01323.JPG",

        "roi": [[6803, 93], [6809, 570], [7523, 572], [7514, 95]]
    },

    "curvature": {
        "crop": {
            "pts_src": [[306, 12], [284, 4458], [7677, 4434], [7649, 30]],
            "width": 0.92,
            "height": 0.55
        },

        "use_cache": true

    },

    "segmentation": {
        "labels_path": "cache/labels.npy",
        "median disk radius": 50,
        "rescaling factor": 0.5,
        "marker_points": [
            [520,2830],
            [837,110],
            [938,2755],
            [1666,4653],
            [2030,1471],
            [2257,5268],
            [3188,5297],
            [3923,4878],
            [55, 2916],
            [2621, 1412],
            [753, 6957],
            [2800, 5100]
        ],
        "region_size": 30,
        "dilation size": 0,
        "boundary size": 140,
        "verbosity": false
    },

    "co2": {
        "cleaning_filter": "cache/cleaning_filter_red.npy",

        "segmented": true,
        "color": "red",

        "presmoothing": true,
        "presmoothing method": "isotropic bregman",
        "presmoothing resize": 0.5,
        "presmoothing weight": 0.01,
        "presmoothing eps": 1e-4,
        "presmoothing max_num_iter": 200,

        "threshold dynamic": true,
        "threshold method": "first local min",
        "threshold value": 0.2,
        "threshold value min": 0.06,
        "threshold value max": 0.2,

        "postsmoothing": true,
        "postsmoothing method": "isotropic bregman",
        "postsmoothing resize": 0.5,
        "postsmoothing weight": 0.01,
        "postsmoothing eps": 1e-4,
        "postsmoothing max_num_iter": 200,

        "verbosity": false
    },

    "co2(g)": {
        "cleaning_filter": "cache/cleaning_filter_blue.npy",

        "segmented": true,
        "color": "blue",

        "presmoothing": true,
        "presmoothing method": "isotropic bregman",
        "presmoothing resize x": 0.2,
        "presmoothing resize y": 1.0,
        "presmoothing weight": 0.01,
        "presmoothing eps": 1e-4,
        "presmoothing max_num_iter": 100,

        "threshold dynamic": true,
        "threshold method": "first local min",
        "threshold value": 0.12,
        "threshold value min": 0.05,
        "threshold value max": 0.12,

        "comment on min area size and max hole size": "needed due to inaccurate segmentation of the geometry - the interfaces are not accurate, while the signal registration is - this results in boundary effects mitigated by removing small objects",
        "min area size": 1000,
        "max hole size": 1000,

        "postsmoothing": true,
        "postsmoothing method": "isotropic bregman",
        "postsmoothing resize x": 0.25,
        "postsmoothing weight": 0.01,
        "postsmoothing eps": 1e-4,
        "postsmoothing max_num_iter": 100,

        "posterior": true,
        "threshold posterior gradient modulus": 0.0015,

        "verbosity": false
    },

    "calibration": {"scaling": 1.0},

    "include compaction": true,

    "co2_old": {
        "cleaning_filter": "cache/cleaning_filter_red.npy",

        "color": "red",

        "presmoothing": true,
        "presmoothing method": "bregman isotropic",
        "presmoothing resize": 0.5,
        "presmoothing weight": 0.05,
        "presmoothing eps": 1e-4,
        "presmoothing max_num_iter": 200,

        "threshold value": 0.12,

        "postsmoothing": false,
        "postsmoothing method": "isotropic bregman",
        "postsmoothing resize": 0.5,
        "postsmoothing weight": 2,
        "postsmoothing eps": 1e-4,
        "postsmoothing max_num_iter": 100,

        "verbosity": false
    },

    "co2 on grain level": {
        "cleaning_filter": "cache/cleaning_filter_red.npy",

        "color": "red",

        "presmoothing": true,
        "presmoothing method": "chambolle",
        "presmoothing resize": 0.5,
        "presmoothing weight": 5,
        "presmoothing eps": 1e-4,
        "presmoothing max_num_iter": 200,

        "threshold value": 0.12,

        "postsmoothing": false,
        "postsmoothing method": "isotropic bregman",
        "postsmoothing resize": 0.5,
        "postsmoothing weight": 2,
        "postsmoothing eps": 1e-4,
        "postsmoothing max_num_iter": 100,

        "verbosity": true
    },

    "co2(g) old": {
        "cleaning_filter": "cache/cleaning_filter_blue.npy",

        "color": "blue",

        "presmoothing": true,
        "presmoothing method": "anisotropic bregman",
        "presmoothing resize x": 0.2,
        "presmoothing resize y": 0.8,
        "presmoothing weight": 0.01,
        "presmoothing eps": 1e-4,
        "presmoothing max_num_iter": 100,

        "threshold value": 0.032,

        "postsmoothing": true,
        "postsmoothing method": "anisotropic bregman",
        "postsmoothing resize": 0.5,
        "postsmoothing weight": 0.01,
        "postsmoothing eps": 1e-4,
        "postsmoothing max_num_iter": 100,

        "posterior": true,
        "threshold posterior gradient modulus": 0.0015,

        "verbosity": false
    },

    "co2(g)_yellow/sat": {
        "cleaning_filter": "cache/co2_gas_cleaning_filter_yellow.npy",

        "threshold hue min": 40,
        "threshold hue max": 80,

        "presmoothing": false,
        "presmoothing resize": 0.5,
        "presmoothing weight": 5,
        "presmoothing eps": 1e-4,
        "presmoothing max_num_iter": 100,

        "threshold value": 0.1,

        "postsmoothing": false,
        "postsmoothing resize": 0.5,
        "postsmoothing weight": 5,
        "postsmoothing eps": 1e-4,
        "postsmoothing max_num_iter": 100,

        "posterior": false,
        "threshold posterior gradient modulus": 0.002,

        "verbosity": true
    },

    "co2(g)_hsv": {
        "cleaning_filter": "cache/co2_gas_cleaning_filter_hsv.npy",

        "threshold hue min": 40,
        "threshold hue max": 80,

        "presmoothing": false,
        "presmoothing resize": 0.5,
        "presmoothing weight": 5,
        "presmoothing eps": 1e-4,
        "presmoothing max_num_iter": 100,

        "threshold value": 0.2,

        "postsmoothing": false,
        "postsmoothing resize": 0.5,
        "postsmoothing weight": 5,
        "postsmoothing eps": 1e-4,
        "postsmoothing max_num_iter": 100,

        "posterior": false,
        "threshold posterior gradient modulus": 0.002,

        "verbosity": true
    },

    "co2(g)_hed": {
        "cleaning_filter": "cache/co2_gas_cleaning_filter_hed.npy",

        "presmoothing": false,
        "presmoothing resize": 0.5,
        "presmoothing weight": 5,
        "presmoothing eps": 1e-4,
        "presmoothing max_num_iter": 100,

        "threshold value": 0.0,

        "postsmoothing": false,
        "postsmoothing resize": 0.5,
        "postsmoothing weight": 5,
        "postsmoothing eps": 1e-4,
        "postsmoothing max_num_iter": 100,

        "posterior": false,
        "threshold posterior gradient modulus": 0.002,

        "verbosity": true
    },

    "co2(g)_blue": {
        "cleaning_filter": "cache/co2_gas_cleaning_filter_blue.npy",

        "presmoothing": true,
        "presmoothing resize": 0.5,
        "presmoothing weight": 5,
        "presmoothing eps": 1e-4,
        "presmoothing max_num_iter": 100,

        "threshold value": 0.01,

        "postsmoothing": true,
        "postsmoothing resize": 0.5,
        "postsmoothing weight": 5,
        "postsmoothing eps": 1e-4,
        "postsmoothing max_num_iter": 100,

        "posterior": true,
        "threshold posterior gradient modulus": 0.002,

        "verbosity": true
    }
}
